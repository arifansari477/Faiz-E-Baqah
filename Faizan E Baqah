<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Faiz-e-Baqah</title>
  <style>
    body { 
      margin: 0; 
      font-family: 'Georgia', serif; 
      background: #f7efe3; 
      color: #333; 
      transition: background 0.3s, color 0.3s;
    }
    body.dark { background: #1e1e1e; color: #eee; }
    header {
      background: #d4b483;
      padding: 15px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      color: #fff;
      position: relative;
    }
    button {
      padding: 6px 12px; 
      font-size: 14px; 
      border: none; 
      border-radius: 5px; 
      cursor: pointer;
    }
    button:hover { opacity: 0.8; }
    .screen { display: none; padding: 20px; }
    .active { display: block; }
    textarea { 
      width: 100%; height: 120px; padding: 10px; 
      font-size: 16px; border-radius: 5px; border: 1px solid #ccc; 
      margin-bottom: 10px; resize: vertical;
    }
    select, input[type=text] { padding: 6px; font-size: 14px; margin-bottom: 10px; }
    #shayariList { margin-top: 20px; }
    .shayari-item {
      background: #fff3e0; padding: 15px; margin-bottom: 10px; border-radius: 5px; 
      position: relative; transition: transform 0.3s, opacity 0.3s;
    }
    .shayari-item.fav { border-left: 5px solid #e74c3c; }
    .shayari-item button { margin-left: 5px; }
    .top-controls { display: flex; justify-content: space-between; margin-bottom: 10px; flex-wrap: wrap; }
    .char-count { font-size: 12px; color: #555; }
    .dark header { background: #333; }
    .dark .shayari-item { background: #2a2a2a; color: #eee; }
  </style>
</head>
<body>

  <header>
    Faizan-e-Baqahullah
    <button onclick="toggleDarkMode()" style="position:absolute; right:10px; top:10px;">‚òÄÔ∏è/üåô</button>
  </header>

  <div id="addScreen" class="screen active">
    <div class="top-controls">
      <input type="text" id="searchInput" placeholder="Search Shayari..." oninput="searchShayari()">
      <button onclick="showRandomShayari()">Random Shayari</button>
    </div>
    <h2>Add Your Shayari</h2>
    <textarea id="shayariInput" placeholder="Type your Shayari..." oninput="updateCharCount()"></textarea>
    <div class="char-count" id="charCount">0 characters</div>
    <select id="categoryInput">
      <option value="General">General</option>
      <option value="Love">Love</option>
      <option value="Friendship">Friendship</option>
      <option value="Sadness">Sadness</option>
    </select>
    <button onclick="addShayari()">Add Shayari</button>
  </div>

  <div id="viewScreen" class="screen">
    <div class="top-controls">
      <input type="text" id="searchInputView" placeholder="Search Shayari..." oninput="searchShayariView()">
      <button onclick="showAddScreen()">Add New Shayari</button>
    </div>
    <div id="shayariList"></div>
  </div>

<script>
let shayariArray = JSON.parse(localStorage.getItem('shayariArray')) || [];

function saveToLocal() {
  localStorage.setItem('shayariArray', JSON.stringify(shayariArray));
}

function updateCharCount() {
  const input = document.getElementById('shayariInput');
  document.getElementById('charCount').innerText = input.value.length + ' characters';
}

function addShayari() {
  const text = document.getElementById('shayariInput').value.trim();
  const category = document.getElementById('categoryInput').value;
  if(text === '') { alert('Please enter Shayari!'); return; }
  shayariArray.push({ text, category, fav: false });
  saveToLocal();
  document.getElementById('shayariInput').value = '';
  updateCharCount();
  showViewScreen();
}

function showViewScreen() {
  document.getElementById('addScreen').classList.remove('active');
  document.getElementById('viewScreen').classList.add('active');
  renderShayariList();
}

function showAddScreen() {
  document.getElementById('viewScreen').classList.remove('active');
  document.getElementById('addScreen').classList.add('active');
}

function renderShayariList(filter='') {
  const list = document.getElementById('shayariList');
  list.innerHTML = '';
  shayariArray.forEach((item, index) => {
    if(filter && !item.text.toLowerCase().includes(filter.toLowerCase())) return;
    const div = document.createElement('div');
    div.className = 'shayari-item' + (item.fav ? ' fav' : '');
    div.innerHTML = `
      <strong>[${item.category}]</strong><br>${item.text}
      <div style="margin-top:5px;">
        <button onclick="editShayari(${index})">Edit</button>
        <button onclick="deleteShayari(${index})">Delete</button>
        <button onclick="toggleFav(${index})">${item.fav ? 'üíñ' : '‚ô°'}</button>
        <button onclick="copyShayari(${index})">Copy</button>
        <button onclick="shareShayari(${index})">Share</button>
      </div>
    `;
    list.appendChild(div);
  });
}

function editShayari(index) {
  document.getElementById('shayariInput').value = shayariArray[index].text;
  document.getElementById('categoryInput').value = shayariArray[index].category;
  updateCharCount();
  deleteShayari(index);
  showAddScreen();
}

function deleteShayari(index) {
  shayariArray.splice(index, 1);
  saveToLocal();
  renderShayariList();
}

function toggleFav(index) {
  shayariArray[index].fav = !shayariArray[index].fav;
  saveToLocal();
  renderShayariList();
}

function copyShayari(index) {
  navigator.clipboard.writeText(shayariArray[index].text);
  alert('Shayari copied!');
}

function shareShayari(index) {
  const url = `https://wa.me/?text=${encodeURIComponent(shayariArray[index].text)}`;
  window.open(url, '_blank');
}

function toggleDarkMode() {
  document.body.classList.toggle('dark');
}

function showRandomShayari() {
  if(shayariArray.length === 0) return alert('No Shayari to show!');
  const rand = Math.floor(Math.random() * shayariArray.length);
  alert(shayariArray[rand].text);
}

function searchShayari() {
  const filter = document.getElementById('searchInput').value;
  renderShayariList(filter);
}

function searchShayariView() {
  const filter = document.getElementById('searchInputView').value;
  renderShayariList(filter);
}

renderShayariList();
</script>

</body>
</html>
